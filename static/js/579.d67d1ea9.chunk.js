"use strict";(self.webpackChunktaskpro=self.webpackChunktaskpro||[]).push([[579],{9172:(e,a,r)=>{r.r(a),r.d(a,{default:()=>A});var t=r(9379),d=r(3003),n=r(5043),o=r(3216),i=r(3967),l=r(4551),s=r(7658),c=r(6389),u=r(8163),m=r(5391),_=r(1486),h=r(9564),g=r(9384),C=r(5518),p=r(9425);const x={BoardsSection:"CurrentBoardPage_BoardsSection__hUveN",NameFilter:"CurrentBoardPage_NameFilter__dRdit","task-card":"CurrentBoardPage_task-card__zju9l","card-without":"CurrentBoardPage_card-without__DpdGI","card-low":"CurrentBoardPage_card-low__NegAV","card-medium":"CurrentBoardPage_card-medium__IhaRb","card-high":"CurrentBoardPage_card-high__2Ru0R","card-title":"CurrentBoardPage_card-title__TKWaz","card-description":"CurrentBoardPage_card-description__QYr-B",bottomCard:"CurrentBoardPage_bottomCard__mLWJC",Svgs:"CurrentBoardPage_Svgs__JKr+y",columnName:"CurrentBoardPage_columnName__Ecl60",DeadlineBell:"CurrentBoardPage_DeadlineBell__H+MK-",Cards:"CurrentBoardPage_Cards__ij8tf","deadlineBell-high":"CurrentBoardPage_deadlineBell-high__-zKxl",Priority:"CurrentBoardPage_Priority__fOtNe",Deadline:"CurrentBoardPage_Deadline__xMM6U",ColumnsSection:"CurrentBoardPage_ColumnsSection__O1jof",ulButton:"CurrentBoardPage_ulButton__p4H33",AddColumBtn:"CurrentBoardPage_AddColumBtn__VKoAI",AddCardBtn:"CurrentBoardPage_AddCardBtn__UFUfo",PriorityColor:"CurrentBoardPage_PriorityColor__Goww1","priority-without":"CurrentBoardPage_priority-without__XVuOV","priority-low":"CurrentBoardPage_priority-low__MJuPB","priority-medium":"CurrentBoardPage_priority-medium__ElfxD","priority-high":"CurrentBoardPage_priority-high__zEaP6",dark:"CurrentBoardPage_dark__6qttL",Column:"CurrentBoardPage_Column__pt8VB",violet:"CurrentBoardPage_violet__ODall"};var B=r(5266),j=r(3552),f=r(1849),y=r(7945),v=r(579);const A=()=>{const e=(0,o.zy)(),{state:a}=e,r=(0,d.d4)((e=>e.auth.user.theme)),[A,P]=(0,n.useState)([]),[w,N]=(0,n.useState)(),[b,k]=(0,n.useState)(),I=(0,d.wA)(),S=(0,d.d4)((e=>e.modal)),{componentName:H}=S,M=a.transferedBoard,D=a.updates,E=M.backgroundImage,O=M.name,z=M.slug,q=A,F=(0,d.d4)((e=>e.columns.columns)),R=F.filter((e=>e.boardName===z)),K=q.concat(R),V=Array.from(new Set(K.map((e=>e._id)))).map((e=>K.find((a=>a._id===e)))),L=q.flatMap((e=>e.cards)),U=(0,d.d4)((e=>e.cards.cards||[])),G=U.filter((e=>!L.some((a=>a._id===e._id)))),J=[...L,...G.filter((e=>K.some((a=>a._id===e.columnId))))],[W,Q]=(0,n.useState)(null),[T,X]=(0,n.useState)(E);(0,n.useEffect)((()=>{const e=B.A.find((e=>e.image===E||e.tablet===E||e.mobile===E)),a=()=>{const a=window.innerWidth;e&&X(a<768?e.mobile:a<1024?e.tablet:e.image)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)}),[E]),(0,n.useEffect)((()=>{M.slug&&(async()=>{try{const e=await I((0,g.Hh)(M.slug));return P(e.payload.columns),e.payload}catch(e){console.error("Error fetching columns:",e)}})()}),[I,M.slug]);const Y=()=>{if(b){const e=J.filter((e=>e.priority===b.payload));return"all"===b.payload?J:e}return J},Z=async()=>{try{const e=await I((0,g.Hh)(M.slug));P(e.payload.columns)}catch(e){console.error("Error refreshing board:",e)}};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(m.A,{}),(0,v.jsxs)("section",{className:"".concat(x.BoardsSection," ").concat(x[r]),style:{backgroundImage:"url(".concat((E!==(null===D||void 0===D?void 0:D.backgroundImage)?null===D||void 0===D?void 0:D.backgroundImage:E)||T,")")},children:[(0,v.jsxs)("div",{className:x.NameFilter,children:[(0,v.jsx)("h1",{children:(O!==(null===D||void 0===D?void 0:D.name)?null===D||void 0===D?void 0:D.name:O)||O}),(0,v.jsx)(i.A,{setFilter:k})]}),(0,v.jsx)("ul",{className:x.ColumnsSection,children:V.length>0?(0,v.jsxs)("li",{className:"".concat(x.ulButton),children:[V.map((e=>(0,v.jsxs)("div",{className:"".concat(x.Column," ").concat(x[r]),children:[(0,v.jsxs)("h2",{className:x.columnName,children:[e.name,(0,v.jsxs)("div",{style:{width:"40px",display:"flex",justifyContent:"space-between"},children:[(0,v.jsx)("svg",{width:"16",height:"16",onClick:()=>{return a=e._id,Q(a),void I((0,_.qf)("editColumn"));var a},children:(0,v.jsx)("use",{xlinkHref:"".concat(y.A,"#pencil")})}),(0,v.jsx)("svg",{width:"16",height:"16",onClick:()=>(async e=>{await I((0,h.gR)({boardName:M.slug,id:e._id})),P((a=>a.filter((a=>a._id!==e._id))))})(e),children:(0,v.jsx)("use",{xlinkHref:"".concat(y.A,"#bin")})})]})]}),(0,v.jsx)("ul",{className:"".concat(x.Cards," ").concat(x[r]),children:Y().filter((a=>a.columnId===e._id)).map((a=>(0,v.jsxs)("li",{className:"".concat(x["task-card"]," ").concat(x["card-".concat(a.priority)]),children:[(0,v.jsx)("h2",{className:x["card-title"],children:a.title}),(0,v.jsx)("span",{className:x["card-description"],children:a.description}),(0,v.jsxs)("div",{className:"".concat(x.bottomCard),children:[(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,v.jsxs)("span",{className:"".concat(x.Priority),children:["Priority",(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,v.jsx)("span",{className:"".concat(x.PriorityColor," ").concat(x["priority-".concat(a.priority)])}),(0,v.jsx)("h4",{children:a.priority})]})]}),(0,v.jsxs)("span",{className:"".concat(x.Deadline),children:["Deadline",(0,v.jsx)("h4",{children:(0,j.o)(a.deadline)})]})]}),(0,v.jsxs)("div",{className:"".concat(x.Svgs),children:[(0,v.jsx)("svg",{width:"14",height:"16",className:"".concat(x.DeadlineBell," ").concat(x["deadlineBell-".concat(a.priority)]),children:(0,v.jsx)("use",{xlinkHref:"".concat(y.A,"#bell")})}),(0,v.jsx)(f.A,{boardName:z,columnId:e,cardId:a,allColumns:V,triggerRefresh:Z}),(0,v.jsx)("svg",{width:"16",height:"16",onClick:()=>(e=>{N(e),I((0,_.qf)("editCardModal"))})(a),children:(0,v.jsx)("use",{xlinkHref:"".concat(y.A,"#pencil")})}),(0,v.jsx)("svg",{width:"16",height:"16",onClick:()=>(async e=>{await I((0,C.GO)({boardName:M.slug,id:e._id})),P((a=>a.map((a=>(0,t.A)((0,t.A)({},a),{},{cards:a.cards.filter((a=>a._id!==e._id))})))))})(a),children:(0,v.jsx)("use",{xlinkHref:"".concat(y.A,"#bin")})})]})]})]},a._id)))}),(0,v.jsxs)("button",{className:x.AddCardBtn,onClick:()=>{return a=e._id,Q(a),void I((0,_.qf)("cardModal"));var a},children:[(0,v.jsx)("svg",{width:"28",height:"28",children:(0,v.jsx)("use",{xlinkHref:"".concat(y.A,"violet"!==r?"#buttons-plus":"#buttons-plus-violet")})}),"Add another card"]})]},e._id))),(0,v.jsxs)("button",{className:x.AddColumBtn,onClick:()=>I((0,_.qf)("columnModal")),children:[(0,v.jsx)("svg",{width:"28",height:"28",children:(0,v.jsx)("use",{xlinkHref:"".concat(y.A,"dark"!==r?"#buttons-plus":"#buttons-plus-violet")})}),"Add another column"]})]}):(0,v.jsxs)("button",{className:x.AddColumBtn,onClick:()=>I((0,_.qf)("columnModal")),children:[(0,v.jsx)("svg",{width:"28",height:"28",children:(0,v.jsx)("use",{xlinkHref:"".concat(y.A,"dark"!==r?"#buttons-plus":"#buttons-plus-violet")})}),"Add another column"]})}),"columnModal"===H&&(0,v.jsx)(l.A,{onClose:()=>I((0,_.Oo)())}),"cardModal"===H&&(0,v.jsx)(c.A,{onClose:()=>I((0,_.Oo)()),columnId:W}),"editColumn"===H&&(0,v.jsx)(s.A,{onClose:()=>I((0,_.Oo)()),columnId:W,updateColumn:(e,a)=>{P((r=>r.map((r=>r._id===e?(0,t.A)((0,t.A)({},r),{},{name:a}):r)))),I((0,p.B)({id:e,name:a}))}}),"editCardModal"===H&&(0,v.jsx)(u.A,{onClose:()=>I((0,_.Oo)()),cardId:w,updateCard:e=>{P((a=>a.map((a=>(0,t.A)((0,t.A)({},a),{},{cards:a.cards.map((a=>a._id===e._id?(0,t.A)((0,t.A)({},a),e):a))})))))}})]})]})}}}]);
//# sourceMappingURL=579.d67d1ea9.chunk.js.map